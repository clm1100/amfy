<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
    <title>测测你在星战中是谁?</title>
    <link rel="stylesheet" href="style/animate.css"/>
    <style>
        *{margin:0;padding:0;
            /*-webkit-touch-callout:none;*/
            /*-webkit-touch-callout:none;*/
            /*-webkit-user-select:none;*/
            /*-khtml-user-select:none;*/
            /*-moz-user-select:none;*/
            /*-ms-user-select:none;*/
            /*user-select:none;*/
        }
        html,body{width:100%;  height: 100%;}
        .content{width:100%;height:100%;background: url("img/bg.jpg") no-repeat center center;background-size: cover}
        .head{height: 25%;background:url("img/s_02.png") no-repeat center bottom;background-size: 90%}
        .body{height: 48%;background:url("img/s_04.png") no-repeat center center;background-size: 100%;opacity: 0}
        .name{height: 8%;background: url("img/4_06.png") no-repeat center center;background-size: 100%;
            text-align: center;}
        .btn{height: 12%;background:url("img/s_08_08.png") no-repeat center center;background-size: 80%}
        .num{height: 3%;text-align: center;  }
        .num p{font-size:12px;font-family:"微软雅黑";color:#fff;}
        .num span{color:#a1ddf7;}
        #name{border: none;outline: none;background:transparent;height:100%;line-height: 100%;width:60%;font-size: 14px;
            font-family:"微软雅黑";color:#7c7d7f;text-align: center;}
        #btn{width:32%;height:60%;margin:0 auto;position: relative;top:10px}
        .msg{position:absolute;top:60%;left:50%;margin-left: -60px;width: 120px;background:#000;color: white;text-align: center;
            opacity: 0;-webkit-transition: all 1s;transition: all 1s;border-radius: 3px;;
        }
        .action{opacity: 1 }
    </style>
</head>
<body>
<div class="content">
    <div class="head animated bounceInDown"></div>
    <div class="body"></div>
    <div class="name">
        <input id="name" type="text" placeholder="请输入你的姓名"/>
    </div>
    <div class="btn">
        <div id="btn">

        </div>
    </div>
    <div class="num">
        <p>已有<span>6453</span>人参与</p>
    </div>
</div>
<div class="msg">
    名字不能为空
</div>
<script src="style/zepto.js"></script>
<script src="style/event.js"></script>
<script src="style/touch.js"></script>
<script src="style/pinyin.js"></script>
<script src="style/index.js"></script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?f4651fa752d7aeceef4850788adb55e4";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
<script type="application/javascript">

    // 微信相关方法
    function is_weixin() {
        var ua = window.navigator.userAgent.toLowerCase();
        return 'micromessenger' == ua.match(/MicroMessenger/i);
    }

    document.addEventListener("DOMContentLoaded", function(event) {
        if(is_weixin()) {
            var title = "测测你在星战中是谁!";
            var desc = "测测你在星战中是谁!";
            var link = "http://games.moretao.com/xz/index.html";
            var imgUrl = "http://suancai-mxp.stor.sinaapp.com/s_04.png";
            var api = "http://m.moretao.com/wechat/ticket?page=" + encodeURIComponent(window.location.href);
            $.get(api, function(ticket, status) {
                if(ticket.ticket) {
                    var t = ticket.ticket;

                    // 微信初始化, 设置分享
                    wx.config({
                        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端 alert 出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                        appId: 'wx8c1226347ed11c26', // 必填，公众号的唯一标识
                        timestamp: t.at, // 必填，生成签名的时间戳
                        nonceStr: t.noncestr, // 必填，生成签名的随机串
                        imgUrl: 'http://suancai-mxp.stor.sinaapp.com/xlj.jpg',
                        signature: t.signature,// 必填，签名，见附录1
                        jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline', 'onMenuShareQQ', 'onMenuShareQZone', "getInstallState"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                    });

                    wx.ready(function () {
                        wx.onMenuShareAppMessage({
                            title: title,
                            desc: desc,
                            link: link,
                            imgUrl: imgUrl
                        });

                        wx.onMenuShareTimeline({
                            title: title,
                            desc: desc,
                            link: link,
                            imgUrl: imgUrl
                        });

                        wx.onMenuShareQQ({
                            title: title,
                            desc: desc,
                            link: link,
                            imgUrl: imgUrl
                        });

                        wx.onMenuShareQZone({
                            title: title,
                            desc: desc,
                            link: link,
                            imgUrl: imgUrl
                        });
                    });
                }
            });
        }
    });
</script>
</body>
</html>